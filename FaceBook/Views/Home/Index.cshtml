@model List<PostViewModel>;

@{
    Layout = "~/Views/Shared/_LoggedInLayout.cshtml";
    ViewData["Title"] = "Home Page";
}

<partial name="_CreatePostPartial" />

@foreach (var post in ViewBag.posts)
{
    <div class="card w-100 shadow-xss rounded-xxl border-0 p-4 mb-3">
        <div class="card-body p-0 d-flex">
            <figure class="avatar me-3">
                <img src="~/files/images/@post.User.Img" alt="image" class="shadow-sm rounded-circle w45">
            </figure>
            <h4 class="fw-700 text-grey-900 font-xssss mt-1">
                @{
                    TimeSpan timeElapsed = DateTime.Now - post.Created;
                    string timeElapsedText = "";

                    if (timeElapsed.TotalDays >= 1)
                    {
                        timeElapsedText = $"{(int)timeElapsed.TotalDays} days ago";
                    }
                    else if (timeElapsed.TotalHours >= 1)
                    {
                        timeElapsedText = $"{(int)timeElapsed.TotalHours} hours ago";
                    }
                    else if (timeElapsed.TotalMinutes >= 1)
                    {
                        timeElapsedText = $"{(int)timeElapsed.TotalMinutes} minutes ago";
                    }
                    else
                    {
                        timeElapsedText = "just now";
                    }
                }

                @post.User.FirstName @post.User.LastName
                <span class="d-block font-xssss fw-500 mt-1 lh-3 text-grey-500">@timeElapsedText</span>
            </h4>
            <a class="ms-auto">
                <i class="ti-more-alt text-grey-900 btn-round-md bg-greylight font-xss"></i>
            </a>
        </div>
        <div class="card-body p-0 me-lg-5">
            <p class="fw-500 text-grey-500 lh-26 font-xssss w-100 mb-2">
                @post.Body
            </p>
        </div>
        @if(post.Image != null)
        {
            <div class="card-body d-block p-0 mb-3">
                <div class="row ps-2 pe-2">
                    <div class="col-sm-12 p-1">
                        <a data-lightbox="roadtr">
                            <img src="~/files/images/@post.Image" class="rounded-3 w-100" alt="image">
                        </a>
                    </div>
                </div>
            </div>

        }
        <div class="card-body d-flex p-0">
            <a class="emoji-bttn d-flex align-items-center fw-600 text-grey-900 text-dark lh-26 font-xssss me-2">
            </a>
            <div class="emoji-wrap">
                <ul class="emojis list-inline mb-0">
                </ul>
            </div>
            <a class="d-flex align-items-center fw-600 text-grey-900 text-dark lh-26 font-xssss">
            </a>
            <a href="#" class="ms-auto d-flex align-items-center fw-600 text-grey-900 text-dark lh-26 font-xssss">
                <i class="feather-share-2 text-grey-900 text-dark btn-round-sm font-lg"></i>
                <span class="d-none-xs">Share</span>
            </a>
        </div>
    </div>

}
