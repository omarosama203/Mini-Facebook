@{
    Layout = "~/Views/Shared/_SearchPageLayout.cshtml";
}
<div class="row">
    <div class="col-lg-12">
        <div class="card w-100 border-0 p-0 bg-white shadow-xss rounded-xxl">
            <div class="card-body h250 p-0 rounded-xxl overflow-hidden m-3">
                <img src="https://uitheme.net/sociala/images/u-bg.jpg" alt="image">
            </div>
            <div class="card-body p-0 position-relative">
                <figure class="avatar position-absolute w100 z-index-1" style="top:-40px; left: 30px;">
                    <img src="~/files/images/@ViewBag.user.Img" alt="image" class="float-right p-1 bg-white rounded-circle w-100">
                </figure>
                <h4 class="fw-700 font-sm mt-2 mb-lg-5 mb-4 pl-15">
                    @ViewBag.user.FirstName @ViewBag.user.LastName <span class="fw-500 font-xssss text-grey-500 mt-1 mb-3 d-block">@@ @ViewBag.user.UserName</span>
                </h4>
                <div class="d-flex align-items-center justify-content-center position-absolute-md right-15 top-0 me-2">
                    <a href="#" id="dropdownMenu4" class="d-none d-lg-block bg-greylight btn-round-lg ms-2 rounded-3 text-grey-700" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="ti-more font-md tetx-dark"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end p-4 rounded-xxl border-0 shadow-lg" aria-labelledby="dropdownMenu4">
                        <div class="card-body p-0 d-flex">
                            <i class="feather-bookmark text-grey-500 me-3 font-lg"></i>
                            <h4 class="fw-600 text-grey-900 font-xssss mt-0 me-0">
                                Save Link <span class="d-block font-xsssss fw-500 mt-1 lh-3 text-grey-500">Add this to your saved items</span>
                            </h4>
                        </div>
                        <div class="card-body p-0 d-flex mt-2">
                            <i class="feather-alert-circle text-grey-500 me-3 font-lg"></i>
                            <h4 class="fw-600 text-grey-900 font-xssss mt-0 me-0">
                                Hide Post <span class="d-block font-xsssss fw-500 mt-1 lh-3 text-grey-500">Save to your saved items</span>
                            </h4>
                        </div>
                        <div class="card-body p-0 d-flex mt-2">
                            <i class="feather-alert-octagon text-grey-500 me-3 font-lg"></i>
                            <h4 class="fw-600 text-grey-900 font-xssss mt-0 me-0">
                                Hide all from Group <span class="d-block font-xsssss fw-500 mt-1 lh-3 text-grey-500">Save to your saved items</span>
                            </h4>
                        </div>
                        <div class="card-body p-0 d-flex mt-2">
                            <i class="feather-lock text-grey-500 me-3 font-lg"></i>
                            <h4 class="fw-600 mb-0 text-grey-900 font-xssss mt-0 me-0">
                                Unfollow Group <span class="d-block font-xsssss fw-500 mt-1 lh-3 text-grey-500">Save to your saved items</span>
                            </h4>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-body d-block w-100 shadow-none mb-0 p-0 border-top-xs">
                <ul class="nav nav-tabs h55 d-flex product-info-tab border-bottom-0 ps-4" id="pills-tab" role="tablist">
                    <li class="active list-inline-item me-5">
                        <a class="fw-700 font-xssss text-grey-500 pt-3 pb-3 ls-1 d-inline-block active" href="#navtabs1" data-toggle="tab">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-xxl-3 col-lg-4 pe-0">
        <div class="card w-100 shadow-xss rounded-xxl border-0 my-3">
            <div class="card-body border-top-xs d-flex">

                <i class="feather-lock text-grey-500 me-3 font-lg"></i>
                <h4 class="fw-700 text-grey-900 font-xssss mt-0">
                    Public <span class="d-block font-xssss fw-500 mt-1 lh-3 text-grey-500">What's up, how are you?</span>
                </h4>
            </div>
            <div class="card-body d-flex pt-0">
                <i class="feather-eye text-grey-500 me-3 font-lg"></i>
                <h4 class="fw-700 text-grey-900 font-xssss mt-0">
                    Visble <span class="d-block font-xssss fw-500 mt-1 lh-3 text-grey-500">Anyone can find you</span>
                </h4>
            </div>
            <div class="card-body d-flex pt-0">
                <i class="feather-map-pin text-grey-500 me-3 font-lg"></i>
                <h4 class="fw-700 text-grey-900 font-xssss mt-1">Flodia, Austia </h4>
            </div>
            <div class="card-body d-flex pt-0">
                <i class="feather-users text-grey-500 me-3 font-lg"></i>
                <h4 class="fw-700 text-grey-900 font-xssss mt-1">Genarel Group</h4>
            </div>
        </div>
        <div class="card w-100 shadow-xss rounded-xxl border-0 mb-3">
            <div class="card-body d-flex align-items-center  p-4">
                <h4 class="fw-700 mb-0 font-xssss text-grey-900">Photos</h4>
            </div>
            <div class="card-body d-block pt-0 pb-2">
                <div class="row">
                    @foreach (var image in ViewBag.images)
                    {
                        <div class="col-6 mb-2 pe-1">
                            <a data-lightbox="roadtrip">
                                <img src="~/files/images/@image" alt="image" class="img-fluid rounded-3 w-100">
                            </a>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-8 col-xxl-9 col-lg-8">

        @* Create Post Here *@
        @if (ViewBag.currentUserId == ViewBag.user.Id)
        {
            <partial name="_CreatePostPartial" />
        }
        @foreach (var post in ViewBag.posts)
        {
            <div class="card w-100 shadow-xss rounded-xxl border-0 p-4 my-3">
                <div class="card-body p-0 d-flex">
                    <figure class="avatar me-3">
                        <img src="~/files/images/@post.User.Img" alt="image" class="shadow-sm rounded-circle w45">
                    </figure>
                    <h4 class="fw-700 text-grey-900 font-xssss mt-1">
                        @{
                            TimeSpan timeElapsed = DateTime.Now - post.Created;
                            string timeElapsedText = "";

                            if (timeElapsed.TotalDays >= 1)
                            {
                                timeElapsedText = $"{(int)timeElapsed.TotalDays} days ago";
                            }
                            else if (timeElapsed.TotalHours >= 1)
                            {
                                timeElapsedText = $"{(int)timeElapsed.TotalHours} hours ago";
                            }
                            else if (timeElapsed.TotalMinutes >= 1)
                            {
                                timeElapsedText = $"{(int)timeElapsed.TotalMinutes} minutes ago";
                            }
                            else
                            {
                                timeElapsedText = "just now";
                            }
                        }

                        @post.User.FirstName @post.User.LastName
                        <span class="d-block font-xssss fw-500 mt-1 lh-3 text-grey-500">@timeElapsedText</span>
                    </h4>
                    @if (post.UserId == ViewBag.userid)
                    {
                        <a class="ms-auto">
                            <form style="display: inline-block;" method="post" action="@Url.Action("deletePost", "Home")" onsubmit="return confirm('Are you sure you want to delete this Post?');">
                                <input type="hidden" name="id" value="@post.Id" />
                                <button type="submit" class="btn btn-link"><i class="bi bi-x-circle-fill"></i></button>
                            </form>



                        </a>

                    }

                </div>
                <div class="card-body p-0 ms-lg-5">
                    <p class="fw-500 text-dark lh-26 font-xss w-100 mb-2 text-end">
                        @post.Body
                    </p>
                </div>
                @if (post.Image != null)
                {
                    <div class="card-body d-block p-0 mb-3">
                        <div class="row ps-2 pe-2">
                            <div class="col-sm-12 p-1">
                                <a data-lightbox="roadtr">
                                    <img src="~/files/images/@post.Image" class="rounded-3 w-100" alt="image">
                                </a>
                            </div>
                        </div>
                    </div>

                }
                <div class="card-body d-flex p-0">
                    <a class="emoji-bttn d-flex align-items-center fw-600 text-grey-900 text-dark lh-26 font-xssss me-2">
                    </a>
                    <div class="emoji-wrap">
                        <ul class="emojis list-inline mb-0">
                        </ul>
                    </div>
                    <a class="d-flex align-items-center fw-600 text-grey-900 text-dark lh-26 font-xssss">
                    </a>
                    <a href="#" class="ms-auto d-flex align-items-center fw-600 text-grey-900 text-dark lh-26 font-xssss">
                        <i class="feather-share-2 text-grey-900 text-dark btn-round-sm font-lg"></i>
                        <span class="d-none-xs">Share</span>
                    </a>
                </div>
            </div>


        }
    </div>
</div>

